---
layout: post
title: 对口型动画
date: 2021-01-20 23:30:16
categories: 随记
tags: 视频 表达式
typora-root-url: ..
---

* content
{:toc}
Shining拜年祭相声单品需要口型动画.

所以构思了几个方案. 涉及到的知识附在了方案后边.

<!-- more -->

### 方案设想

#### 对2取模

如果有音频的时候就取time的二进制末尾

这样应该能轻易的做出来「口合口合口合」的效果

#### [x] loop+json

从json导入音频的时间, 然后从入点开始loopout

当time超过出点的时候归零就好了

> 这大概得写个脚本吧…有点麻烦

#### 音频映射时间

1. 建立好口型动画, 时间轴为“闭合-张开”
2. 为口型预合成开启时间重映射, 并连接到一个滑块控制(0~Slide_max).
3. 将音频转换为关键帧, 利用通道里的slide, 通过ease映射到滑块里完成映射.

- 可以添加一个图层控制, 控制要利用哪一个图层的音频

#### 对2取模Plus

俺寻思了一下, 取模基本上和loop差不多呀.

1. 对time先除以一个数避免切换太快
2. 模就是口型的总帧数
3. 最后连接到时间重映射

- 为了确保是慢慢张开的, 得让time减去最近的一个音频入点
- 不过我拿到的素材估计就是两帧的, 大概不需要考虑这个问题



### loop表达式

#### 循环类型 type

| type     | 行为 | 例子          |
| -------- | ---- | ------------- |
| cycle    | 循环 | 123, 123, 123 |
| pingpong | 折返 | 123, 321, 123 |
| offset   | 弥补 | 123, 456, 789 |
| continue | 延续 | 123, 3++, 3++ |

#### 循环控制 in/out

1. 基本的in/out控制的是循环的计算范围
2. numkeyframes: 根据关键帧确定循环帧
3. duration: 根据时间确定循环帧

#### 奇怪的地方

序列帧的话记得把小太阳打开, 很神必



### 时间重映射

#### 效果分析

从实际效果上看, 相当于是给time打关键帧.

#### 图表的使用

对于value图表而言, 纵坐标相当于原本时间的值.

因此, 曲线向上移动相当于顺序播放, 斜率的绝对值越大说明速度越快

#### 帧混合

可以使得变换了时间的运动更加平滑